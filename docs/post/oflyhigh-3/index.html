<!DOCTYPE html>
<html lang="zh-cn">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.54.0" />
  <meta name="author" content="学 R：零基础学习 R 语言">
  <meta name="description" content="赵鹏 李怡 著">

  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="/xuer/css/highlight.min.css">
    
  
  <link rel="stylesheet" href="/xuer/css/bootstrap.min.css">
  <link rel="stylesheet" href="/xuer/css/font-awesome.min.css">
  <link rel="stylesheet" href="/xuer/css/academicons.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700|Merriweather|Roboto+Mono">
  <link rel="stylesheet" href="/xuer/css/hugo-academic.css">
  

  <link rel="alternate" href="https://pzhaonet.github.io/xuer/index.xml" type="application/rss+xml" title="学 R ">
  <link rel="feed" href="https://pzhaonet.github.io/xuer/index.xml" type="application/rss+xml" title="学 R ">

  <link rel="icon" type="image/png" href="/xuer/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/xuer/img/apple-touch-icon.png">

  <link rel="canonical" href="https://pzhaonet.github.io/xuer/post/oflyhigh-3/">

  

  <title>oflyhigh： 在 Linux 下源码方式装 R | 学 R </title>

</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71">

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">切换导航</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/xuer/">学 R </a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        

        

        <li class="nav-item">
          <a href="/xuer/#about">
            
            <span>简介</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/xuer/#posts">
            
            <span>书友之窗</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/xuer/#help">
            
            <span>辅助资料</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/xuer/#authors">
            
            <span>作者简介</span>
          </a>
        </li>

        
        
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  

  <div class="article-container">
    <h1 itemprop="name">oflyhigh： 在 Linux 下源码方式装 R</h1>
    

<div class="article-metadata">

  <span class="article-date">
    <time datetime="2018-06-05 00:00:00 &#43;0000 UTC" itemprop="datePublished">
      Tue, Jun 5, 2018
    </time>
  </span>

  
  
  
  

  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fpzhaonet.github.io%2fxuer%2fpost%2foflyhigh-3%2f"
         target="_blank">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=oflyhigh%ef%bc%9a%20%e5%9c%a8%20Linux%20%e4%b8%8b%e6%ba%90%e7%a0%81%e6%96%b9%e5%bc%8f%e8%a3%85%20R&amp;url=https%3a%2f%2fpzhaonet.github.io%2fxuer%2fpost%2foflyhigh-3%2f"
         target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fpzhaonet.github.io%2fxuer%2fpost%2foflyhigh-3%2f&amp;title=oflyhigh%ef%bc%9a%20%e5%9c%a8%20Linux%20%e4%b8%8b%e6%ba%90%e7%a0%81%e6%96%b9%e5%bc%8f%e8%a3%85%20R"
         target="_blank">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=https%3a%2f%2fpzhaonet.github.io%2fxuer%2fpost%2foflyhigh-3%2f&amp;title=oflyhigh%ef%bc%9a%20%e5%9c%a8%20Linux%20%e4%b8%8b%e6%ba%90%e7%a0%81%e6%96%b9%e5%bc%8f%e8%a3%85%20R"
         target="_blank">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=oflyhigh%ef%bc%9a%20%e5%9c%a8%20Linux%20%e4%b8%8b%e6%ba%90%e7%a0%81%e6%96%b9%e5%bc%8f%e8%a3%85%20R&amp;body=https%3a%2f%2fpzhaonet.github.io%2fxuer%2fpost%2foflyhigh-3%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>

    <div class="article-style" itemprop="articleBody">
      

<p>本文经作者 @oflyhigh 授权转载（<a href="https://steemit.com/r/@oflyhigh/r-linux-r-installing-r-from-source" target="_blank">原文链接</a>），略有改动。</p>

<hr />

<p>之前为了体验一下 R，随便用<strong><code>sudo apt-get install r-base r-base-dev</code></strong>装了个 R，合计反正就是体验一下，没必要像正规军一样搞得很复杂。然后今天发现一个真理，就是<strong>你以前偷的懒，都会在以后找回来的</strong>。</p>

<p>话说昨天别人问我个小问题，用到<strong><code>quantmod</code></strong>这个东东，甭管它是啥，先装着试试呗。</p>

<pre><code>install.packages('quantmod')
</code></pre>

<p>结果想象中的一路 yes，顺利安装被没有出现，而是我给我个提示：</p>

<blockquote>
<p><code>package 'quantmod' is not available (for R version 3.1.1)</code></p>
</blockquote>

<p>原本以为我无往不利的搜索大法应该很快解决这个问题，结果这次找了 N 多网页却没有找到答案，满头雾水的我最后终于意识到，是我的R的版本太旧了。好吧，先不管这个<strong><code>quantmod</code></strong>，升级版本先，想用最新版本的最好方式当然是从源码安装了，说干就干，源码安装走起。</p>

<h3 id="准备工作">准备工作</h3>

<h4 id="更新系统">更新系统</h4>

<p>首先更新一下系统</p>

<pre><code>sudo apt-get update
sudo apt-get upgrade
</code></pre>

<p>无论干点啥，先更新一下，身体倍棒，吃嘛嘛香。</p>

<h4 id="创建目标目录">创建目标目录</h4>

<pre><code>sudo mkdir /opt/R
sudo chmod 777 /opt/R
</code></pre>

<p>我瞎建个目录安装，要是没啥问题的话，其实可以使用默认目录的。</p>

<h4 id="下载源码">下载源码</h4>

<p>去<a href="https://www.r-project.org/" target="_blank">https://www.r-project.org/</a> 找一下最新的源码，我找到的最新的是这个：</p>

<blockquote>
<p><a href="https://cran.r-project.org/src/base/R-3" target="_blank">R version 3.5.0 (Joy in Playing)</a> has been released on 2018-04-23.</p>
</blockquote>

<p>点进去之后，找到下载链接：<a href="https://cran.r-project.org/src/base/R-3/R-3.5.0.tar.gz" target="_blank">https://cran.r-project.org/src/base/R-3/R-3.5.0.tar.gz</a>，在Linux系统下执行如下命令，将其下载到本地，解压，并进入目录</p>

<pre><code>wget https://cran.r-project.org/src/base/R-3/R-3.5.0.tar.gz
tar xzvf R-3.5.0.tar.gz
cd R-3.5.0
</code></pre>

<h4 id="安装必要编译工具">安装必要编译工具</h4>

<p>其实我也不知道应该按啥，因为不知道系统都有啥，缺啥按啥吧。 因为我的系统上曾经按过不少东西，所以没提示缺啥。</p>

<h3 id="配置-r">配置 R</h3>

<p>配置我参考的 <a href="https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Installing-R-under-Unix_002dalikes" target="_blank">Installing-R-under-Unix_002dalikes</a>，可以使用如下命令查看详细帮助：</p>

<pre><code>./configure --help
</code></pre>

<p>一切默认的话，执行如下命令即可</p>

<pre><code>./configure
</code></pre>

<p>我手欠，先是执行这个配置命令：</p>

<pre><code>./configure  --enable-R-shlib  --prefix=/opt/R
</code></pre>

<p>其中：</p>

<ul>
<li><code>--enable-R-shlib</code></li>
</ul>

<p>将R编译成动态库(libR.so)，然后R的执行程序与之链接。加这个纯属我手欠，因为我没有想在其它语言中集成R，并且<strong>设置这个选项会影响性能</strong>，不过我如实记载我的操作，就放这了。</p>

<ul>
<li><code>--prefix=/opt/R</code></li>
</ul>

<p>这个指定安装目录，否则会安到默认的目录中。</p>

<p>等半天后提示我系统没有 X11，我懒得装 X，直接禁用吧（这块有坑，以后再说）</p>

<pre><code>./configure  --enable-R-shlib  --with-x=no --prefix=/opt/R
</code></pre>

<h3 id="编译-r">编译  R</h3>

<p>配置成功后，执行如下命令进行编译：</p>

<pre><code>make
</code></pre>

<p>结果等半天后出现如下错误信息：</p>

<blockquote>
<p>configuring Java &hellip;  *** Cannot find any Java interpreter *** Please make sure &lsquo;java&rsquo; is on your PATH or set JAVA_HOME correspondingly。</p>
</blockquote>

<p>晕，这难道不应该在配置阶段报错吗？反正我也不用什么JAVA(估计和我启用<code>--enable-R-shlib</code>有关)，重新配置：</p>

<pre><code>./configure  --enable-R-shlib  --with-x=no --disable-java --prefix=/opt/R
</code></pre>

<p>再次编译，成功！然后执行安装命令：</p>

<pre><code>make install
</code></pre>

<h3 id="收尾">收尾</h3>

<p>测试一下，启动 R：</p>

<pre><code>/opt/R/bin/R
</code></pre>

<p><img src="https://cdn.steemitimages.com/DQmerGXgKU1Jg9ixVKa731Pqy6WFgw9GjY1nGj99REudTLJ/image.png" alt="" /></p>

<p>已经是最新版本喽。</p>

<p>创建软链接，方便访问</p>

<pre><code>cd /usr/bin
sudo ln -s /opt/R/bin/R R
sudo ln -s /opt/R/bin/Rscript Rscript
</code></pre>

<h3 id="补充说明">补充说明</h3>

<p>R 的编译和运行需要 Fortran 编译器以及运行时库支持，我后来不小心卸载了，也运行不起来，也配置和编译不了了。</p>

<p>运行R提示：
&gt; /opt/R/lib/R/bin/exec/R: error while loading shared libraries: libgfortran.so.3: cannot open shared object file: No such file or directory</p>

<p>重新配置则提示：
&gt; configure: error: No F77 compiler found</p>

<p>重新安装Fortran编译器，解决问题</p>

<pre><code>sudo apt-get install gfortran
</code></pre>

<p>总算把R搞到最新版本啦，否则拿明朝万历年间的 R 来学习，是有点落伍呢。</p>

    </div>
  </div>

</article>

<div class="container">
  <nav>
  <ul class="pager">
    
    <li class="previous"><a href="https://pzhaonet.github.io/xuer/post/xuer-girls/"><span
      aria-hidden="true">&larr;</span> dapeng：R 语言女子学习小组</a></li>
    

    
    <li class="next"><a href="https://pzhaonet.github.io/xuer/post/dancingapple-1/">dancingapple：学 R 笔记 1 <span
      aria-hidden="true">&rarr;</span></a></li>
    
  </ul>
</nav>

</div>

<div class="article-container">
  

</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 赵鹏 李怡 &middot; 

      Powered by the <a href="https://github.com/gcushen/hugo-academic" target="_blank">Academic
      theme</a> for <a href="http://gohugo.io" target="_blank">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.4/TweenMax.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/ScrollToPlugin.min.js"></script>
    <script src="/xuer/js/jquery-1.12.3.min.js"></script>
    <script src="/xuer/js/bootstrap.min.js"></script>
    <script src="/xuer/js/isotope.pkgd.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.1/imagesloaded.pkgd.min.js"></script>
    <script src="/xuer/js/hugo-academic.js"></script>
    

    

    
    
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    

  </body>
</html>

